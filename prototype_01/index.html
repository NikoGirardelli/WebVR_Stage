<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>PROTOTYPE - 24/01/2018</title>
    <meta name ="description" content="PROTOTYPE - 24/01/2018 - A-Frame">
    <script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls@0.2.0/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <!--<script src="https://rawgit.com/caseyyee/aframe-ui-widgets/master/dist/aframe-ui-widgets.min.js"></script>-->
    <script src="https://unpkg.com/super-hands@2.1.0/dist/super-hands.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.0.1/dist/aframe-event-set-component.min.js"></script>
    <script src="components/ui-widget.js"></script>
    <script src="components/lecture-cube.js"></script>
    <script src="components/phase-shift.js"></script>
    <script src="components/jour-bouton.js"></script>
    <script src="components/bouton-reset-cubes.js"></script>
    <script src="components/horloge.js"></script>
  </head>
  <body>
    <a-scene stats physics environment="preset:forest; shadow:false;">

      <a-assets>
        <!-- Pour les boutons  -->
        <a-mixin id="bouton" jour-bouton ui-button="pressedColor: #808080; color: #000000; baseColor: #ffffff;"></a-mixin>
        <a-mixin id="offset" position="0 0.01 0"></a-mixin>
        <a-mixin id="btn1" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/1.png"></a-mixin>
        <a-mixin id="btn2" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/2.png"></a-mixin>
        <a-mixin id="btn3" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/3.png"></a-mixin>
        <a-mixin id="btn4" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/4.png"></a-mixin>
        <a-mixin id="btn5" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/5.png"></a-mixin>
        <a-mixin id="btn6" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/6.png"></a-mixin>
        <a-mixin id="btn7" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/7.png"></a-mixin>
        <a-mixin id="btn8" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/8.png"></a-mixin>
        <a-mixin id="btn9" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/9.png"></a-mixin>
        <a-mixin id="btn0" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/0.png"></a-mixin>
        <a-mixin id="btn-ok" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/ok.png"></a-mixin>
        <a-mixin id="btn-reset" geometry="primitive: cylinder; radius: 0.1; height: 0.025; segmentsHeight: 1;" position="0 0.02 0" material="src:img/jour/reset.png"></a-mixin>

        <!-- Pour les mois -->
        <a-mixin id="cubeMois" geometry="primitive:box; width:0.4; height:0.4; depth:0.4"
                 grabbable hoverable draggable dynamic-body shadow
                 event-set__hover-start="material.opacity: 0.7"
                 event-set__hover-end="material.opacity: 1.0"></a-mixin>
        <a-mixin id="lecteurCube" droppable static-body
                 collision-filter="collisionForces: false"
                 geometry="primitive: box; width: 0.5; height: 0.5; depth: 0.5"
                 event-set__dragover-start="material.color: green"
                 event-set__dragover-end="material.color: white"></a-mixin>
        <!-- to change touch mode collider -->
        <a-mixin id="mytouch" physics-collider phase-shift
                 collision-filter="collisionForces: false"
                 static-body="shape: sphere; sphereRadius: 0.02"
                 super-hands="colliderEvent: collisions; colliderEventProperty: els;
                              colliderEndEvent: collisions; colliderEndEventProperty: clearedEls;
                              colliderState:"></a-mixin>
        <!-- Les textures des mois -->
        <img id="jan" src="img/mois/jan.png">
        <img id="feb" src="img/mois/feb.png">
        <img id="mar" src="img/mois/mar.png">
        <img id="apr" src="img/mois/apr.png">
        <img id="may" src="img/mois/may.png">
        <img id="june" src="img/mois/june.png">
        <img id="july" src="img/mois/july.png">
        <img id="aug" src="img/mois/aug.png">
        <img id="sept" src="img/mois/sept.png">
        <img id="oct" src="img/mois/oct.png">
        <img id="nov" src="img/mois/nov.png">
        <img id="dec" src="img/mois/dec.png">
        <img id="JAN" src="img/mois/jan_t.png">
        <img id="FEB" src="img/mois/feb_t.png">
        <img id="MAR" src="img/mois/mar_t.png">
        <img id="APR" src="img/mois/apr_t.png">
        <img id="MAY" src="img/mois/may_t.png">
        <img id="JUNE" src="img/mois/june_t.png">
        <img id="JULY" src="img/mois/july_t.png">
        <img id="AUG" src="img/mois/aug_t.png">
        <img id="SEPT" src="img/mois/sept_t.png">
        <img id="OCT" src="img/mois/oct_t.png">
        <img id="NOV" src="img/mois/nov_t.png">
        <img id="DEC" src="img/mois/dec_t.png">
      </a-assets>

      <!-- Les mains et la camera -->
      <a-entity id="cameraRig" progressive-controls="objects: .cube; touchMixin: mytouch; override: true; controllerModel:false">
        <a-entity id="head" camera wasd-controls look-controls></a-entity>
        <a-entity id="left-hand"
                  teleport-controls="cameraRig: #cameraRig;
                                     teleportOrigin: #head;
                                     type:parabolic;"
                                     hand-controls="left"></a-entity>
        <a-entity id="right-hand" hand-controls="right"></a-entity>
      </a-entity>

      <!-- Selecteur jour -->
      <a-entity id="selecteurJour" scale="0.8 0.8 0.8" position="0 0.5 -3">
        <!-- Les boutons -->
        <a-entity geometry="primitive:box;depth:1.28;height:0.25;width:1.75;"
                  material="color:#FFFFFF;" position="-0.25 0.129 0"></a-entity>
        <a-entity mixin="bouton" data-btn="1" ui-button="top:btn1;pressed:btn1,offset"position="-0.813 0.263 0.375"></a-entity>
        <a-entity mixin="bouton" data-btn="4" ui-button="top:btn4;pressed:btn4,offset" position="-0.813 0.263 0"></a-entity>
        <a-entity mixin="bouton" data-btn="7" ui-button="top:btn7;pressed:btn7,offset" position="-0.813 0.263 -0.375"></a-entity>
        <a-entity mixin="bouton" data-btn="2" ui-button="top:btn2;pressed:btn2,offset" position="-0.4375 0.263 0.375"></a-entity>
        <a-entity mixin="bouton" data-btn="5" ui-button="top:btn5;pressed:btn5,offset" position="-0.4375 0.263 0"></a-entity>
        <a-entity mixin="bouton" data-btn="8" ui-button="top:btn8;pressed:btn8,offset" position="-0.4375 0.263 -0.375"></a-entity>
        <a-entity mixin="bouton" data-btn="3" ui-button="top:btn3;pressed:btn3,offset" position="-0.0625 0.263 0.375"></a-entity>
        <a-entity mixin="bouton" data-btn="6" ui-button="top:btn6;pressed:btn6,offset" position="-0.0625 0.263 0"></a-entity>
        <a-entity mixin="bouton" data-btn="9" ui-button="top:btn9;pressed:btn9,offset" position="-0.0625 0.263 -0.375"></a-entity>
        <a-entity mixin="bouton" data-btn="0" ui-button="top:btn0;pressed:btn0,offset" position="0.3125 0.263 0.375"></a-entity>
        <a-entity mixin="bouton" data-btn="ok" position="0.3125 0.263 0" ui-button="top:btn-ok;pressed:btn-ok,offset"></a-entity>
        <a-entity mixin="bouton" data-btn="reset" position="0.3125 0.263 -0.375" ui-button="top:btn-reset;pressed:btn-reset,offset"></a-entity>
        <!-- Le texte -->
        <a-entity id="ecranJour" position="-0.25 1.883 -1" data-jour="" geometry="radius:1.44;phiStart:180;phiLength:180;primitive:sphere" material="side:back" text__t="width:1.98;wrapCount:6.5;value:Day :  ;color:red;"></a-entity>
        <a-entity position="-0.25 1.201 -1" text__t="wrapCount:28;value:\nYou can't have more than two numbers.\nPress 'Ok' to continue \nor press 'Reset' to enter new day;width:1.98;align:center"></a-entity>
      </a-entity>

      <!-- Les cubes pour choisir le mois -->
      <a-entity id="selecteurMois" scale="0.5 0.5 0.5" position="-3 0 0">
        <a-entity class="cube" mixin="cubeMois" position="-0.5 5 -1.5"
                  material="src:#jan" data-mois="JAN"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 5 -1.5"
                  material="src:#feb" data-mois="FEB"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="1.5 5 -1.5"
                  material="src:#dec" data-mois="DEC"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="-0.5 5 -2.5"
                  material="src:#mar" data-mois="MAR"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 5 -2.5"
                  material="src:#apr" data-mois="APR"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="1.5 5 -2.5"
                  material="src:#may" data-mois="MAY"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="-0.5 5 -3.5"
                  material="src:#june" data-mois="JUNE"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 5 -3.5"
                  material="src:#july" data-mois="JULY"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="1.5 5 -3.5"
                  material="src:#aug" data-mois="AUG"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="1.5 5 -4.5"
                  material="src:#nov" data-mois="NOV"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="-0.5 5 -4.5"
                  material="src:#sept" data-mois="SEPT"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 5 -4.5"
                  material="src:#oct" data-mois="OCT"></a-entity>

        <!-- Le lecteur de cube -->
        <a-entity class="lecteurCube" mixin="lecteurCube" position = "0.5 1.9 -0.8"
                  material="color:white; opacity: 0.7" data-mois-choisi="" lecture-cube>
          <a-box id="blocSousLecteur" static-body width=0.5 height=0.5 depth=0.5 visible="true" position="0 -0.5 0" shadow></a-box>
        </a-entity>

        <a-entity bouton-reset-cubes position="1.5 1.17 -0.8" ui-button="baseColor: #ffffff;top:btn-reset;pressed:btn-reset,offset"></a-entity>
        <a-entity position="0.5 0.5 -2.7"geometry="primitive:box;depth: 4.5; width: 3; height: 1.25" static-body material="color:brown;"></a-entity>
      </a-entity>

      <!-- Horloge -->
      <a-entity id="horloge" horloge data-heure-choisisse="12" geometry="primitive: cylinder; radius:0.59; height:0.05;" scale="0.8 0.8 0.8" position="3 1.5 0" material="color:#FFFFFF;" rotation="90 270 0">
        <a-entity id="monAiguille" ui-rotary></a-entity>
        <a-entity geometry="primitive: box; depth:0.01; height: 0.6; width:0.02;" position="0 0.048 -0.217" material="color:#a82121" rotation="90 0 0"></a-entity>
        <a-entity id="lesChiffres">
          <a-entity  text="value:1;align:center;color:#000000;width:4" rotation="-90 0 0" position="0.252 0.027 -0.388"></a-entity>
          <a-entity  text="value:2;align:center;color:#000000;width:4" rotation="-90 0 0" position="0.419 0.027 -0.25"></a-entity>
          <a-entity  text="value:3;align:center;color:#000000;width:4" rotation="-90 0 0" position="0.493 0.027 -0.003"></a-entity>
          <a-entity  text="value:4;align:center;color:#000000;width:4" rotation="-90 0 0" position="0.419 0.027 0.255"></a-entity>
          <a-entity  text="value:5;align:center;color:#000000;width:4" rotation="-90 0 0" position="0.237 0.027 0.41"></a-entity>
          <a-entity  text="value:6;align:center;color:#000000;width:4" rotation="-90 0 0" position="0 0.027 0.474"></a-entity>
          <a-entity  text="value:7;align:center;color:#000000;width:4" rotation="-90 0 0" position="-0.261 0.027 0.41"></a-entity>
          <a-entity  text="value:8;align:center;color:#000000;width:4" rotation="-90 0 0" position="-0.43 0.027 0.255"></a-entity>
          <a-entity  text="value:9;align:center;color:#000000;width:4" rotation="-90 0 0" position="-0.493 0.027 -0.003"></a-entity>
          <a-entity  text="value:10;align:center;color:#000000;width:4" rotation="-90 0 0" position="-0.43 0.027 -0.217"></a-entity>
          <a-entity  text="value:11;align:center;color:#000000;width:4" rotation="-90 0 0" position="-0.261 0.027 -0.388"></a-entity>
          <a-entity  text="value:12;align:center;color:#000000;width:4" rotation="-90 0 0" position="0 0.027 -0.462"></a-entity>
        </a-entity>
      </a-entity>



      <!-- Collider du sol pour empêcher les blocs de tomber -->
      <a-box static-body width=100 height=0.001 depth=100 visible="false"></a-box>

    </a-scene>
  </body>
</html>
