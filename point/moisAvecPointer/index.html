<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mois avec pointer</title>
    <meta name ="description" content="Mois avec pointer - A-Frame">
    <script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls@0.2.0/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/super-hands@2.1.0/dist/super-hands.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.0.1/dist/aframe-event-set-component.min.js"></script>
    <script src="components/ui-widget.js"></script>
    <script src="components/phase-shift.js"></script>
    <script src="components/changement-outil.js"></script>
    <script src="components/horloge.js"></script>
    <script src="components/jour-clickable.js"></script>
    <script src="components/lecture-cube.js"></script>
  </head>
  <body>
    <a-scene stats physics environment="preset:forest; shadow:false;">

      <a-assets>
        <a-mixin id="mypoint" phase-shift
                 raycaster="showLine:true;far:15;interval:25;
                            objects:.choixJour, .cube,
                                    .lecteurCube, .changement-heure;"
                 super-hands="colliderEvent:raycaster-intersection;
                              colliderEventProperty:els;
                              colliderEndEvent:raycaster-intersection-cleared;
                              colliderEndEventProperty:el;
                              dragDropEndButtons: triggerup;
                              dragDropStartButtons: triggerdown;
                              stretchEndButtons: triggerup;
                              stretchStartButtons: triggerdown;
                              grabEndButtons: triggerup;
                              grabStartButtons: triggerdown;"></a-mixin>
        <!-- Pour les mois -->
        <a-mixin id="cubeMois" grabbable hoverable
                 draggable dynamic-body shadow
                 geometry="primitive:box; width:0.4; height:0.4; depth:0.4"
                 event-set__hover-start="material.opacity: 0.4"
                 event-set__hover-end="material.opacity: 1.0"></a-mixin>
        <a-mixin id="lecteurCube" droppable static-body
                 collision-filter="group:.cube;collisionForces: false"
                 geometry="primitive: box; width: 0.5; height: 0.5; depth: 0.5"
                 event-set__dragover-start="material.color: green"
                 event-set__dragover-end="material.color: grey"></a-mixin>
        <a-mixin id="etagere" static-body material="color:grey;"
                 rotation="0 90 0"
                 geometry="primitive:box;
                           depth: 0.75;
                           width: 2;height: 0.2"></a-mixin>
        <!-- Pour les jours -->
        <a-mixin id="btnCal" rotation="90 90 90"
                 geometry="width:0.5;height:0.1;depth:0.5"
                 material="opacity:0.2"></a-mixin>
        <!-- Aiguille -->
        <a-mixin id="aiguille" material="color:#a82121" rotation="90 0 0"
                 geometry="primitive: box;
                           depth:0.01; height: 0.6; width:0.02;"></a-mixin>
        <!-- Animations-->
        <a-mixin id="fade" attribute="material.opacity" direction="alternate"
                 begin="playFade" repeat="0"
                 from="0.2" to="1" dur="500"></a-mixin>
        <!-- Textures jour -->
        <img id="t_1" src="img/jour/1.png">
        <img id="t_2" src="img/jour/2.png">
        <img id="t_3" src="img/jour/3.png">
        <img id="t_4" src="img/jour/4.png">
        <img id="t_5" src="img/jour/5.png">
        <img id="t_6" src="img/jour/6.png">
        <img id="t_7" src="img/jour/7.png">
        <img id="t_8" src="img/jour/8.png">
        <img id="t_9" src="img/jour/9.png">
        <img id="t_10" src="img/jour/10.png">
        <img id="t_11" src="img/jour/11.png">
        <img id="t_12" src="img/jour/12.png">
        <img id="t_13" src="img/jour/13.png">
        <img id="t_14" src="img/jour/14.png">
        <img id="t_15" src="img/jour/15.png">
        <img id="t_16" src="img/jour/16.png">
        <img id="t_17" src="img/jour/17.png">
        <img id="t_18" src="img/jour/18.png">
        <img id="t_19" src="img/jour/19.png">
        <img id="t_20" src="img/jour/20.png">
        <img id="t_21" src="img/jour/21.png">
        <img id="t_22" src="img/jour/22.png">
        <img id="t_23" src="img/jour/23.png">
        <img id="t_24" src="img/jour/24.png">
        <img id="t_25" src="img/jour/25.png">
        <img id="t_26" src="img/jour/26.png">
        <img id="t_27" src="img/jour/27.png">
        <img id="t_28" src="img/jour/28.png">
        <img id="t_29" src="img/jour/29.png">
        <img id="t_30" src="img/jour/30.png">
        <img id="t_31" src="img/jour/31.png">
        <!-- Textures mois -->
        <img id="jan" src="img/mois/jan.png">
        <img id="feb" src="img/mois/feb.png">
        <img id="mar" src="img/mois/mar.png">
        <img id="apr" src="img/mois/apr.png">
        <img id="may" src="img/mois/may.png">
        <img id="june" src="img/mois/june.png">
        <img id="july" src="img/mois/july.png">
        <img id="aug" src="img/mois/aug.png">
        <img id="sept" src="img/mois/sept.png">
        <img id="oct" src="img/mois/oct.png">
        <img id="nov" src="img/mois/nov.png">
        <img id="dec" src="img/mois/dec.png">
        <img id="JAN" src="img/mois/jan_t.png">
        <img id="FEB" src="img/mois/feb_t.png">
        <img id="MAR" src="img/mois/mar_t.png">
        <img id="APR" src="img/mois/apr_t.png">
        <img id="MAY" src="img/mois/may_t.png">
        <img id="JUNE" src="img/mois/june_t.png">
        <img id="JULY" src="img/mois/july_t.png">
        <img id="AUG" src="img/mois/aug_t.png">
        <img id="SEPT" src="img/mois/sept_t.png">
        <img id="OCT" src="img/mois/oct_t.png">
        <img id="NOV" src="img/mois/nov_t.png">
        <img id="DEC" src="img/mois/dec_t.png">
      </a-assets>

      <!-- Les mains -->
      <a-entity id="player" progressive-controls="controllerModel:false;
                maxLevel:point;pointMixin:mypoint;touchMixin:mytouch;">
        <a-entity id="lhand" hand-controls="left"
                  teleport-controls="type:parabolic;"></a-entity>
        <a-entity id="rhand" hand-controls="right"></a-entity>
      </a-entity>

      <!-- Horloge -->
      <a-entity id="horloge" hoverable
                horloge data-heure-choisisse=""
                event-set__hover-start="material.opacity: 0.2;"
                event-set__hover-end="material.opacity:1;"
                scale="0.8 0.8 0.8" position="1.5 1.5 -1"
                rotation="90 270 0">
        <a-entity id="monAiguille"
                  aiguille-horloge clickable hoverable ui-rotary></a-entity>
        <a-entity id="fondHorloge" geometry="primitive: cylinder; radius:0.59; height:0.045;"
                  material="color:#FFFFFF;"></a-entity>
        <!--<a-entity geometry="primitive: cylinder; radius:0.1; height:0.045;"
                  material="color:grey;" position="0 0.05 0"></a-entity>-->
        <!-- Les colliders
        <a-entity class="changement-heure" material="color:blue;"
                  position="0 0.1 0" geometry="primitive: cylinder;
                                               radius:0.59; height:0.045;
                                               thetaLength:180;"></a-entity>
        <a-entity class="changement-heure"
                  material="color:red;" position="0 0.1 0"
                  geometry="primitive: cylinder;
                            radius:0.59; height:0.045;
                            thetaLength:180;thetaStart:180;"></a-entity>-->

        <!-- Les aiguilles
        <a-entity id="monAiguille" mixin="aiguille"
                  geometry="height: 0.4;"
                  position="0 0.048 -0.217"></a-entity>
        <a-entity mixin="aiguille" position="0 0.034 -0.217"></a-entity>-->

        <!-- Les chiffres -->
        <a-entity id="lesChiffres">
          <a-entity text="value:1;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="0.252 0.027 -0.388"></a-entity>
          <a-entity text="value:2;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="0.419 0.027 -0.25"></a-entity>
          <a-entity text="value:3;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="0.493 0.027 -0.003"></a-entity>
          <a-entity text="value:4;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="0.419 0.027 0.255"></a-entity>
          <a-entity text="value:5;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="0.237 0.027 0.41"></a-entity>
          <a-entity text="value:6;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="0 0.027 0.474"></a-entity>
          <a-entity text="value:7;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="-0.261 0.027 0.41"></a-entity>
          <a-entity text="value:8;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="-0.43 0.027 0.255"></a-entity>
          <a-entity text="value:9;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="-0.493 0.027 -0.003"></a-entity>
          <a-entity text="value:10;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="-0.43 0.027 -0.217"></a-entity>
          <a-entity text="value:11;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="-0.261 0.027 -0.388"></a-entity>
          <a-entity text="value:12;align:center;color:#000000;width:4"
                    rotation="-90 0 0" position="0 0.027 -0.462"></a-entity>
        </a-entity>
      </a-entity>

      <!-- Jour -->
      <a-entity id="calendrier" hoverable
                position="-1.05 2.06 -3" scale="0.5 0.5 0.5">
        <a-text id="textJour" position="-2.9 0.25 0" value="Day Selected : "
                text="whiteSpace: pre;
                      tabSize: 0; width: 2.5;
                      baseline: top; wrapCount: 12;
                      letterSpacing: 0.3"></a-text>
        <a-entity geometry="width: 7; height: 5; depth: 0.5"
                  position="0.24 -1.97 -0.3"
                  material="color: white;" static-body></a-entity>
        <!-- 1re rangée -->
        <a-entity class="choixJour" data-jour="1" mixin="btnCal" material="src:#t_1;">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="2" mixin="btnCal" material="src:#t_2;" position="0.6 0 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="3" mixin="btnCal" material="src:#t_3;" position="1.2 0 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="4" mixin="btnCal" material="src:#t_4;" position="1.8 0 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="5" mixin="btnCal" material="src:#t_5;" position="2.4 0 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="6" mixin="btnCal" material="src:#t_6;" position="3 0 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <!-- 2e rangée -->
        <a-entity class="choixJour" data-jour="7" mixin="btnCal" material="src:#t_7;" position="0 -0.6 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="8" mixin="btnCal" material="src:#t_8;" position="0.6 -0.6 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="9" mixin="btnCal" material="src:#t_9;" position="1.2 -0.6 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="10" mixin="btnCal" material="src:#t_10;" position="1.8 -0.6 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="11" mixin="btnCal" material="src:#t_11;" position="2.4 -0.6 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="12" mixin="btnCal" material="src:#t_12;" position="3 -0.6 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <!-- 3e rangée -->
        <a-entity class="choixJour" data-jour="13" mixin="btnCal" material="src:#t_13;" position="0 -1.2 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="14" mixin="btnCal" material="src:#t_14;" position="0.6 -1.2 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="15" mixin="btnCal" material="src:#t_15;" position="1.2 -1.2 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="16" mixin="btnCal" material="src:#t_16;" position="1.8 -1.2 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="17" mixin="btnCal" material="src:#t_17;" position="2.4 -1.2 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="18" mixin="btnCal" material="src:#t_18;" position="3 -1.2 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <!-- 4e rangée -->
        <a-entity class="choixJour" data-jour="19" mixin="btnCal" material="src:#t_19;" position="0 -1.8 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="20" mixin="btnCal" material="src:#t_20;" position="0.6 -1.8 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="21" mixin="btnCal" material="src:#t_21;" position="1.2 -1.8 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="22" mixin="btnCal" material="src:#t_22;" position="1.8 -1.8 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="23" mixin="btnCal" material="src:#t_23;" position="2.4 -1.8 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="24" mixin="btnCal" material="src:#t_24;" position="3 -1.8 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <!-- 5e rangée -->
        <a-entity class="choixJour" data-jour="25" mixin="btnCal" material="src:#t_25;" position="0 -2.4 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="26" mixin="btnCal" material="src:#t_26;" position="0.6 -2.4 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="27" mixin="btnCal" material="src:#t_27;" position="1.2 -2.4 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="28" mixin="btnCal" material="src:#t_28;" position="1.8 -2.4 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="29" mixin="btnCal" material="src:#t_29;" position="2.4 -2.4 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <a-entity class="choixJour" data-jour="30" mixin="btnCal" material="src:#t_30;" position="3 -2.4 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
        <!-- 6e rangée -->
        <a-entity class="choixJour" data-jour="31" mixin="btnCal" material="src:#t_31;" position="0 -3 0">
          <a-animation mixin="fade"></a-animation>
        </a-entity>
      </a-entity>

      <!-- Mois -->
      <a-entity id="selecteurMois" scale="0.8 0.8 0.8" position="-6 0 0.5">
        <!-- 1re étagère -->
        <a-entity class="cube" mixin="cubeMois" position="0.5 2.5 -2"
                  material="src:#jan" data-mois="JAN"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 2.5 -2.7"
                  material="src:#feb" data-mois="FEB"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 2.5 -3.4"
                  material="src:#dec" data-mois="DEC"></a-entity>
        <a-entity mixin="etagere" position="0.5 2.2 -2.7"></a-entity>
        <!-- 2e étagère -->
        <a-entity class="cube" mixin="cubeMois" position="0.5 1.7 -2"
                  material="src:#mar" data-mois="MAR"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 1.7 -2.7"
                  material="src:#apr" data-mois="APR"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 1.7 -3.4"
                  material="src:#may" data-mois="MAY"></a-entity>
        <a-entity mixin="etagere" position="0.5 1.4 -2.7"></a-entity>
        <!-- 3e étagère -->
        <a-entity class="cube" mixin="cubeMois" position="0.5 2.5 0"
                  material="src:#june" data-mois="JUNE"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 2.5 0.7"
                  material="src:#july" data-mois="JULY"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 2.5 1.4"
                  material="src:#aug" data-mois="AUG"></a-entity>
        <a-entity mixin="etagere" position="0.5 2.2 0.7"></a-entity>
        <!-- 4e étagère -->
        <a-entity class="cube" mixin="cubeMois" position="0.5 1.7 0"
                  material="src:#nov" data-mois="NOV"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 1.7 0.7"
                  material="src:#sept" data-mois="SEPT"></a-entity>
        <a-entity class="cube" mixin="cubeMois" position="0.5 1.7 1.4"
                  material="src:#oct" data-mois="OCT"></a-entity>
        <a-entity mixin="etagere" position="0.5 1.4 0.7"></a-entity>

        <!-- Le lecteur de cube -->
        <a-entity class="lecteurCube" mixin="lecteurCube"
                  position="0.5 1.8 -1" scale="1.2 1.2 1.2"
                  lecture-cube data-mois-choisi=""
                  droppable="accepts:.cube"
                  material="color:grey; opacity: 0.7">
          <a-box id="blocSousLecteur" static-body width=0.5 position="0 -0.5 0"
                 height=0.5 depth=0.5 visible="true" shadow></a-box>
        </a-entity>

        <!-- Mur -->
        <a-entity geometry="width: 7; height: 4; depth: 0.32"
                  position="0 0.906 -0.95" rotation="0 90 0"
                  material="color: white;" static-body></a-entity>
      </a-entity>

      <!-- Collider du sol pour empêcher les blocs de tomber -->
      <a-box static-body width=100 height=0.001 depth=100 visible="false"></a-box>

    </a-scene>

</html>
